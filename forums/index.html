<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en"><![endif]-->
<html class="no-js" lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Universal modding platform and plugin API for Unity, .NET/C#, and soon C++ games" />

    <title>uMod - Forums</title>
    <link rel="canonical" href="https://umod.org/forums/"/>
    <link rel="alternate" href="/feed.xml" type="application/rss+xml" title="uMod" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/images/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/assets/images/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/assets/images/favicon-96x96.png" sizes="96x96" />
    <!--link rel="apple-touch-icon" sizes="57x57" href="/assets/images/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/images/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/images/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/images/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/images/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon-180x180.png" />-->

    <meta property="og:title" content="uMod - Forums">
    <meta property="og:description" content="">
    <meta property="og:image" content="/assets/images/favicon-96x96.png">
    <meta property="og:url" content="https://umod.org/forums/">
    <meta property="og:site_name" content="uMod">

    <!--<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Alt text for image">-->
    <meta name="twitter:site" content="@theumod">
    <!--<meta property="fb:app_id" content="your_app_id" />-->

    <link rel="stylesheet" href="/assets/css/style.css" />
    <link rel="stylesheet" href="/assets/css/prism.css" />

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="/assets/js/github.js"></script>
</head>

<body>
    <!--[if lt IE 8]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <div class="page js-page">
        <div class="header header-over large">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-sm-6 col-xs-5">
                <a href="/" class="logo-image">
                    <img src="/assets/images/logos/umod-gray.png" alt="">
                </a>
            </div>
            <div class="col-md-9 col-sm-6 col-xs-7">
    <nav class="right helper">
        <ul class="menu sf-menu js-menu">
            <li><a href="/">Home</a></li>
            <li><a href="/download/">Download</a></li>
            <li><a href="/plugins/">Plugins</a></li>
            <li><a href="/forums/">Forums</a></li>
            <li><a href="/faq/">FAQ</a></li>
            <li><a href="/changelog/">Changelog</a></li>
            <li><a href="/api/">API</a></li>
        </ul>
    </nav>
</div>

        </div>
    </div>
</div>


<div class="header-back header-back-simple header-back-small">
    <div class="header-back-container">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="page-info page-info-simple">
                        <h1 class="page-title">Forums</h1>
                        <h2 class="page-description"></h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="content">
    <div class="container">
        <!--
TODO: Limit thread title length and add form validation to all input fields
-->

<script type="text/javascript">
    var repo = 'theumod/forums';
    var forumsUrl = "/forums";

    function getThreads() {
        // https://developer.github.com/v3/issues/#list-issues-for-a-repository
        // TODO: Get current, next, and last page numbers; add pagination
        // TODO: Color closed threads differently, else use show/hide
        // TODO: Use "state=all" to show all "threads"
        //<https://api.github.com/repositories/87469017/issues?page=2&per_page=10>; rel="next", <https://api.github.com/repositories/87469017/issues?page=5&per_page=10>; rel="last"

        $.ajax({
            url: 'https://api.github.com/repos/' + forumsUrl + '/issues?page=1&per_page=10',
            type: 'GET',
            dataType: 'json',
            contentType: 'application/json',
            beforeSend: function(xhr) {
                if (accessToken != null && accessToken !== undefined) {
                    xhr.setRequestHeader("Authorization", "token " + accessToken);
                }
            },
            success: function(data, status, request) {
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        var thread_id = data[key].number;
                        var title = data[key].title;
                        var body = data[key].body;
                        var labels = data[key].labels;
                        var state = data[key].state;
                        var locked = data[key].locked;
                        var created = new Date(data[key].created_at);
                        var updated = new Date(data[key].updated_at);
                        var username = data[key].user.login;
                        var avatar_url = data[key].user.avatar_url;
                        var github_profile = data[key].user.html_url;
                        var replies = data[key].comments;

                        var thread = document.createElement('li');
                        thread.className = 'comment-list-item ghostIn';
                        thread.innerHTML ='<div class="comment-content"> \
            				<div class="comment-user-photo"> \
                                <span class="js-open-modal" data-target=".user-card" data-config=""> \
                                    <img src="' + avatar_url + '" class="" alt="user profile photo" /> \
                                </span> \
            				</div> \
            				<div class="comment-body"> \
            				    <div class="comment-header"> \
    								<h3 class="comment-username"> \
    									<a href="https://umod.org/forums/?t=' + thread_id + '" alt="' + title + '">' + title + '</a> \
    								</h3> \
    								<ul class="comment-meta"> \
            							<li class="comment-likes">' + replies + ((replies == 0 || replies > 1) ? " replies" : " reply") + '</li> \
            							<li class="comment-date">' + created.toLocaleString() + '</li> \
            						</ul> \
								</div> \
								<div class="blog-grid-meta"> \
									<span class="blog-grid-author">by <a href="' + github_profile + '" target="_blank">' + username + '</a></span> \
								</div> \
            				</div> \
            			</div>';
            			// TODO: Show thread_id somewhere
                        document.getElementById("thread-list").appendChild(thread);
                    }
                }
            },
            error: function(err) {
                alert("Error: " + JSON.stringify(err));
            }
        });
    }

    function getReplies(thread_id) {
        $.ajax({
            url: 'https://api.github.com/repos/' + forumsUrl + '/issues/' + thread_id + '/comments?per_page=9',
            type: 'GET',
            dataType: 'json',
            contentType: 'application/json',
            beforeSend: function(xhr) {
                if (accessToken != null && accessToken !== undefined) {
                    xhr.setRequestHeader("Authorization", "token " + accessToken);
                }
            },
            success: function(data, status, request) {
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        var reply_id = data[key].id;
                        var body = data[key].body;
                        var created = new Date(data[key].created_at);
                        var updated = new Date(data[key].updated_at);
                        var username = data[key].user.login;
                        var avatar_url = data[key].user.avatar_url;
                        var github_profile = data[key].user.html_url;
                        var replies = data[key].comments;

                        var reply = document.createElement('li');
                        reply.className = 'comment-list-item ghostIn';
                        reply.innerHTML ='<div class="comment-content"> \
            				<div class="comment-user-photo"> \
                                <span class="js-open-modal" data-target=".user-card" data-config=""> \
                                    <img src="' + avatar_url + '" class="" alt="user profile photo" /> \
                                </span> \
            				</div> \
            				<div class="comment-body"> \
            				    <p class="comment-message">' + body + '</p> \
								<div class="blog-grid-meta"> \
									<span class="blog-grid-author">by <a href="' + github_profile + '" target="_blank">' + username + '</a></span> \
								</div> \
								<ul class="comment-actions"> \
            						<li class="comment-action-item"> \
            							<a class="comment-action-like " href="#"> \
            								<i class="fa fa-heart-o"></i> \
            							</a> \
            						</li> \
            						<li class="comment-action-item"> \
            							<a class="comment-action-reply" href="#"> \
            								<i class="fa fa-reply"></i> \
            							</a> \
            						</li> \
            						<li class="comment-action-item"> \
            							<a href="https://umod.org/forums/?t=' + thread_id + '&r=' + reply_id + '" alt="' + reply_id + '"> \
                                            <i class="fa fa-link"></i> \
            							</a> \
            						</li> \
            					</ul> \
            				</div> \
            			</div>';
                        document.getElementById("reply-list").appendChild(reply);
                    }
                }
            },
            error: function(err) {
                alert("Error: " + JSON.stringify(err));
            }
        });
    }

    function getThread(id) {
        // https://developer.github.com/v3/issues/#get-a-single-issue
        // TODO: Use accessToken if it is set and valid for 5000 vs. 60 rate limit
        $.ajax({
            url: 'https://api.github.com/repos/' + forumsUrl + '/issues/' + thread,
            type: 'GET',
            dataType: 'json',
            contentType: 'application/json',
            beforeSend: function(xhr) {
                if (accessToken != null && accessToken !== undefined) {
                    xhr.setRequestHeader("Authorization", "token " + accessToken);
                }
            },
            success: function(data) {
                var thread_id = data.number;
                var title = data.title;
                var body = data.body;
                var labels = data.labels;
                var state = data.state;
                var locked = data.locked;
                var created = new Date(data.created_at);
                var updated = new Date(data.updated_at);
                var username = data.user.login;
                var avatar_url = data.user.avatar_url;
                var github_profile = data.user.html_url;
                var replies = data.comments;

                var thread = document.createElement('li');
                thread.className = 'comment-list-item';
                thread.innerHTML ='<div class="comment-content"> \
    				<div class="comment-user-photo"> \
    					<img src="' + avatar_url + '" class="" alt="user profile photo" /> \
    				</div> \
    				<div class="comment-body"> \
    				    <div class="comment-header"> \
							<h3 class="comment-username"> \
								<a href="https://umod.org/forums/?t=' + thread_id + '" alt="' + title + '">' + title + '</a> \
							</h3> \
    					</div> \
    					<p class="comment-message">' + body + '</p> \
                        <div class="blog-grid-meta"> \
							<span class="blog-grid-author">by <a href="' + github_profile + '" target="_blank">' + username + '</a></span> \
						</div> \
    					<ul class="comment-actions"> \
    						<li class="comment-action-item"> \
    							<a class="comment-action-like " href="#"> \
    								<i class="fa fa-heart-o"></i> \
    							</a> \
    						</li> \
    						<li class="comment-action-item"> \
    							<a class="comment-action-reply" href="#"> \
    								<i class="fa fa-reply"></i> \
    							</a> \
    						</li> \
    					</ul> \
    				</div> \
    			</div>';

                document.getElementById("thread-list").appendChild(thread);
                document.title = 'uMod - ' + data.title;

                if (replies > 0) { getReplies(thread_id) };
            },
            error: function(err) {
                alert("Error: " + JSON.stringify(err));
            }
        });
    }

    var thread;
    var page;
        
    $(document).ready(function() {
        setAccess('forums');

        if (accessToken != null && accessToken !== undefined) {
            $('#new-thread').html("New Thread");
        }
        
        var params = getParameter();
        thread = params[0];
        page = params[1];
        
        if (thread != null || thread !== undefined) {
            getThread(thread);
        } else if (page != null || page !== undefined) {
            getPage(page);
        } else {
            getThreads();
        }

        $('#create-thread').click(function() {
            createIssue(repo, $('#new-thread-form').serializeArray());
        });
    });
</script>

<noscript>
    <div class="note js-note blue">
        <h4 class="note-title">JavaScript supported browser required</h4>
        <p class="note-description">
            In order to view these forums, JavaScript must be allowed and enabled. A modern browser such as Chrome, Firefox, Safari, or similar browser with the latest web technologies and standards is also recommended. If you'd prefer, you can use the <a href="/forums">GitHub issues</a> site instead.
        </p>
    </div>
</noscript>

<span class="button blue js-open-modal helper mr10 mb10" id="new-thread" data-target=".new-thread-modal" data-config="">Login with GitHub</span>
<div class="modal-alt new-thread-modal">
    <div class="modal-alt-content">
    	<div class="review-form">
    		<form id="new-thread-form">
    			<input type="text" name="title" class="review-input" id="thread-title" placeholder="Enter a brief title here to describe your thread" />
    			<textarea name="body" class="review-input" id="thread-body" placeholder="Type the details here. Use can use the Markdown language to format."></textarea>
    			<div class="helper center">
    				<button class="button rounded large blue modal-alt-button js-close-modal-button" id="create-thread">
    					<span class="modal-alt-button-text">Create Thread</span>
    				</button>
    			</div>
    		</form>
    	</div>
    </div>
</div>

<div class="modal-alt user-card">
    <div class="modal-alt-content">
    	<div class="user-card">
            Test
    	</div>
    </div>
</div>

<div class="comments" id="article-comments">
	<ul class="comment-list" id="thread-list"></ul>
	<ul class="comment-list" id="reply-list"></ul>
</div>

    </div>
</div>

<footer class="js-footer-is-fixed">
    <div class="footer-extended">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="footer-extended-container">
                        <div class="row">
                            <div class="col-md-2 col-sm-2 col-xs-4">
                                <div class="footer-extended-menu">
                                    <div class="footer-logo-wrapper">
                                        <a href="/" class="logo-image">
                                            <img src="/assets/images/logos/umod-gray.png" alt="logo">
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-4">
                                <div class="footer-extended-menu">
                                    <h5 class="footer-extended-menu-title">About</h5>
                                    <ul class="footer-extended-menu-list">
                                        <li><a href="/about/">The Project</a></li>
                                        <li><a href="/blog/">Blog</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-4">
                                <div class="footer-extended-menu">
                                    <h5 class="footer-extended-menu-title">Download</h5>
                                    <ul class="footer-extended-menu-list">
                                        <li><a href="/download/">Releases</a></li>
                                        <li><a href="" target="_blank">Source</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-4">
                                <div class="footer-extended-menu">
                                    <h5 class="footer-extended-menu-title">Docs</h5>
                                    <ul class="footer-extended-menu-list">
                                        <li><a href="/getting-started/">Getting Started</a></li>
                                        <li><a href="/faq/">FAQ</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-4">
                                <div class="footer-extended-menu">
                                    <h5 class="footer-extended-menu-title">Community</h5>
                                    <ul class="footer-extended-menu-list">
                                        <li><a href="https://umod.org/forums/">Forums</a></li>
                                        <li><a href="https://discord.gg/Bm58rTq">Discord</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-2 col-xs-4">
                                <div class="footer-extended-menu">
                                    <!--<span class="scroll-top js-scroll-top">
                                        <i class="fa fa-angle-up"></i>
                                    </span>-->
                                    <ul class="footer-menu helper right">
                                        <li><a href="">About</a></li>
                                        <li><a href="">Privacy</a></li>
                                        <li><a href="">Terms</a></li>
                                    </ul>
                                    <p class="copyright helper right">
	                                    The uMod Project and uMod.org &copy; 2017
	                                </p>
	                                <p class="copyright helper right">Built: Sat, 18 Nov 2017 19:22:01 +0000</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>


    </div>

    <script src="/assets/js/all.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/custom.js"></script>

    <script type="text/javascript">(function() { if (window.location.href.indexOf("github.io") > -1) { window.location.replace(""); } })();</script>
</body>
</html>
